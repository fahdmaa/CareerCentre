<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Administrator Login - EMSI Marrakech Career Center">
    <title>Administrator Login - EMSI Marrakech Career Center</title>
    <link rel="stylesheet" href="public/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<!-- Header with Logo -->
<header class="main-header">
    <div class="container">
        <a href="index.html" class="logo-link">
            <img src="public/images/emsi-logo.png" alt="EMSI Logo" class="logo-img">
        </a>
    </div>
</header>

<!-- Pill-Shaped Navigation Bar -->
<nav class="pill-navbar green fixed-bottom hide-on-scroll">
    <ul class="pill-navbar-nav">
        <li>
            <a href="index.html" class="pill-navbar-item">
                <span class="pill-navbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        <polyline points="9 22 9 12 15 12 15 22"></polyline>
                    </svg>
                </span>
                <span class="pill-navbar-label">Home</span>
            </a>
        </li>
        <li>
            <a href="about.html" class="pill-navbar-item">
                <span class="pill-navbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                </span>
                <span class="pill-navbar-label">About</span>
            </a>
        </li>
        <li>
            <a href="jobs.html" class="pill-navbar-item">
                <span class="pill-navbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                    </svg>
                </span>
                <span class="pill-navbar-label">Jobs</span>
            </a>
        </li>
        <li>
            <a href="events.html" class="pill-navbar-item">
                <span class="pill-navbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                </span>
                <span class="pill-navbar-label">Events</span>
            </a>
        </li>
        <li>
            <a href="admin-login.html" class="pill-navbar-item active">
                <span class="pill-navbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </span>
                <span class="pill-navbar-label">Admin</span>
            </a>
        </li>
    </ul>
</nav>

<main class="main-content">
    <section class="page-section">
        <div class="container">
            <h1 class="animate-on-scroll fade-in">Administrator Login</h1>
            <div class="section-content-full admin-login-container animate-on-scroll fade-in">
                <div class="admin-login-card">
                    <div class="admin-login-header">
                        <div class="admin-login-icon">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <h2>Admin Access</h2>
                        <p>Please enter your credentials to access the administrative area</p>
                    </div>

                    <form id="adminLoginForm" class="admin-login-form" action="/api/auth/login" method="POST">
                        <div id="loginMessage" class="login-message"></div>
                        <div class="form-group">
                            <label for="username">Username</label>
                            <div class="input-with-icon">
                                <input type="text" id="username" name="username" required>
                                <span class="input-icon"><i class="fas fa-user"></i></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="password">Password</label>
                            <div class="input-with-icon">
                                <input type="password" id="password" name="password" required>
                                <span class="input-icon"><i class="fas fa-lock"></i></span>
                                <button type="button" class="toggle-password" aria-label="Toggle password visibility">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>

                        <div class="form-group remember-forgot">
                            <div class="remember-me">
                                <input type="checkbox" id="remember" name="remember">
                                <label for="remember">Remember me</label>
                            </div>
                            <a href="#forgot-password" class="forgot-password">Forgot password?</a>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-login">Login</button>
                        </div>
                    </form>

                    <div class="admin-login-footer">
                        <p>For security reasons, this page is restricted to authorized personnel only.</p>
                        <p>If you're having trouble accessing your account, please contact the IT department.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

<footer class="main-footer">
    <div class="container">
        <div class="footer-content">
            <div class="footer-column">
                <h4>EMSI Career Center</h4>
                <div class="footer-contact">
                    <p><strong>EMSI Gueliz:</strong><br>98 Angle Bv Hassan II et rue Yougoslavie<br>Marrakech, Morocco</p>
                    <p><strong>EMSI Centre:</strong><br>5 Lot Bouizgaren, route de safi<br>Marrakech, Morocco</p>
                    <p>Email: <a href="mailto:centrecarriere.marrakech@emsi.ma">centrecarriere.marrakech@emsi.ma</a></p>
                    <p>Phone: <a href="tel:+212524423673">+212 524 423 673</a> | <a href="tel:+212661484697">+212 661 484 697</a></p>
                </div>
            </div>

            <div class="footer-column">
                <h4>Resources</h4>
                <div class="footer-links">
                    <ul>
                        <li><a href="#">CV Templates</a></li>
                        <li><a href="#">Interview Tips</a></li>
                        <li><a href="#">Career Guide</a></li>
                        <li><a href="#">Company Directory</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-column">
                <h4>Connect With Us</h4>
                <div class="footer-social">
                    <p>Follow us on social media to stay updated with the latest opportunities and events.</p>
                    <div class="social-icons">
                        <a href="https://www.linkedin.com/company/career-center-emsi/posts/?feedView=all" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.instagram.com/careercenter.emsi.marrakech/" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Â© <script>document.write(new Date().getFullYear())</script> EMSI Marrakech Career Center. All Rights Reserved.</p>
        </div>
    </div>
</footer>

<script src="public/main.js" defer></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Password visibility toggle
        const togglePassword = document.querySelector('.toggle-password');
        const passwordInput = document.querySelector('#password');

        if (togglePassword && passwordInput) {
            togglePassword.addEventListener('click', function() {
                // Toggle password visibility
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);

                // Toggle icon
                this.querySelector('i').classList.toggle('fa-eye');
                this.querySelector('i').classList.toggle('fa-eye-slash');
            });
        }

        // Enhanced form submission with fetch API
        const adminLoginForm = document.getElementById('adminLoginForm');
        const loginMessage = document.getElementById('loginMessage');

        if (adminLoginForm) {
            adminLoginForm.addEventListener('submit', function(e) {
                e.preventDefault();

                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value;
                const remember = document.getElementById('remember').checked;

                // Show loading state
                const submitButton = adminLoginForm.querySelector('.btn-login');
                submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Logging in...';
                submitButton.disabled = true;

                // In a real implementation, this would be a fetch to your backend API
                // For now, let's simulate a login with some basic validation

                // Simulated authentication - replace this with actual fetch call in production
                setTimeout(function() {
                    // For demonstration - these would be verified against a database in production
                    if (username === 'admin' && password === 'admin123') {
                        // Success - store auth token (in production this would come from the server)
                        localStorage.setItem('authToken', 'sample-auth-token');
                        if (remember) {
                            localStorage.setItem('rememberUser', 'true');
                        }

                        // Show success message
                        loginMessage.className = 'login-message success';
                        loginMessage.textContent = 'Login successful! Redirecting to admin dashboard...';

                        // Redirect to admin dashboard
                        setTimeout(() => {
                            window.location.href = 'admin-dashboard.html';
                        }, 1000);
                    } else {
                        // Failed login
                        loginMessage.className = 'login-message error';
                        loginMessage.textContent = 'Invalid username or password. Please try again.';

                        // Reset button
                        submitButton.innerHTML = 'Login';
                        submitButton.disabled = false;
                    }
                }, 1500);

                /*
                // Production implementation would use fetch:
                fetch('/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: username,
                        password: password,
                        remember: remember
                    }),
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Login failed');
                    }
                    return response.json();
                })
                .then(data => {
                    // Store authentication token
                    localStorage.setItem('authToken', data.token);

                    // Show success message
                    loginMessage.className = 'login-message success';
                    loginMessage.textContent = 'Login successful! Redirecting to admin dashboard...';

                    // Redirect to admin dashboard
                    setTimeout(() => {
                        window.location.href = 'admin-dashboard.html';
                    }, 1000);
                })
                .catch(error => {
                    // Show error message
                    loginMessage.className = 'login-message error';
                    loginMessage.textContent = 'Invalid username or password. Please try again.';

                    // Reset button
                    submitButton.innerHTML = 'Login';
                    submitButton.disabled = false;
                });
                */
            });
        }

        // Check if user was previously logged in
        const checkAuthStatus = () => {
            const authToken = localStorage.getItem('authToken');
            const rememberUser = localStorage.getItem('rememberUser');

            if (authToken && rememberUser) {
                // In production, you would verify the token with your backend
                // If valid, redirect to admin dashboard
                window.location.href = 'admin-dashboard.html';
            }
        };

        // Run auth check on page load
        checkAuthStatus();
    });
</script>
</body>
</html>